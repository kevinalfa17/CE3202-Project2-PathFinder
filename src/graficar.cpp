//============================================================================
// Name        : CE3202-Project2-PathFinder.cpp
// Author      : Kevin, Dennis, David
// Version     : 1.0
// Copyright   : Costa Rica Institute of Technology
// Description : Project for the course Numerical Analysis of the Costa Rica Institute of Technology
//============================================================================

#include "config.h"
#include <iostream>
#include "plot/plotpy.h"

#if defined(IS_SIMD_ACTIVE) && defined(IS_SIMD_AVAILABLE)
#include <xmmintrin.h>
#endif

using namespace std;

/**
 * @brief Clase utilizada para graficar los resultados del desempeño de las operaciones y descomposición
 * 		  de matrices con y sin SIMD.
 * @author Dennis Porras Barrantes
 * @date 19/10/2017
*/
#if defined(IS_SIMD_ACTIVE) && defined(IS_SIMD_AVAILABLE)
int main() {
	cout << "Result of Performance" << endl;
	plotpy::Plot2d<double> plt;
	plotpy::Plot2d<double> plt2;

	vector<double> tNoSIM = {1.66e-06, 2.83332e-05, 0.000104958, 0.000154174, 0.000191854, 0.000323495, 0.00043285, 0.000611395, 0.000817846, 0.00118423, 0.00128431, 0.00146131, 0.00178931, 0.00209028, 0.00245418, 0.00281354, 0.00319648, 0.00362348, 0.00408922, 0.00451537, 0.00521092, 0.0057274, 0.00624367, 0.00683413, 0.00749101, 0.0081233, 0.00869022, 0.00935261, 0.0100258, 0.0107161, 0.0114914, 0.0123969, 0.0131297, 0.014, 0.0147877, 0.0156738, 0.0165768, 0.01757, 0.0185849, 0.0193966, 0.0206649, 0.0217005, 0.0225994, 0.0236411, 0.0250575, 0.0260126, 0.02709, 0.0281615, 0.0294442, 0.0309171, 0.0319519, 0.0333698, 0.0348177, 0.0364483, 0.0369066, 0.0381719, 0.0396886, 0.0414953, 0.0566882, 0.0598424, 0.0616634, 0.0636522, 0.066266, 0.067973, 0.0699023, 0.072267, 0.0747329, 0.0770089, 0.0787436, 0.0822877, 0.0920184, 0.091618, 0.0921474, 0.0982582, 0.105336, 0.102058, 0.103416, 0.105369, 0.108041, 0.110819, 0.113449, 0.117237, 0.121785, 0.122778, 0.125808, 0.129114, 0.132639, 0.135613, 0.137665, 0.141616, 0.144567, 0.147206, 0.150105, 0.152888, 0.156844, 0.159671, 0.16858, 0.168223, 0.17101, 0.176058, 0.178003 };

	vector<double> xy = {3, 53, 103, 153, 203, 253, 303, 353, 403, 453, 503, 553, 603, 653, 703, 753, 803, 853, 903, 953, 1003, 1053, 1103, 1153, 1203, 1253, 1303, 1353, 1403, 1453, 1503, 1553, 1603, 1653, 1703, 1753, 1803, 1853, 1903, 1953, 2003, 2053, 2103, 2153, 2203, 2253, 2303, 2353, 2403, 2453, 2503, 2553, 2603, 2653, 2703, 2753, 2803, 2853, 2903, 2953, 3003, 3053, 3103, 3153, 3203, 3253, 3303, 3353, 3403, 3453, 3503, 3553, 3603, 3653, 3703, 3753, 3803, 3853, 3903, 3953, 4003, 4053, 4103, 4153, 4203, 4253, 4303, 4353, 4403, 4453, 4503, 4553, 4603, 4653, 4703, 4753, 4803, 4853, 4903, 4953, 5003 };

	vector<double> tSIM = {1.74e-06, 1.30748e-05, 4.07519e-05, 6.58438e-05, 9.51461e-05, 0.000122872, 0.000196962, 0.000259165, 0.000349906, 0.000409897, 0.00054333, 0.000624611, 0.000761987, 0.000920133, 0.00107344, 0.00122921, 0.00138597, 0.00155163, 0.00173212, 0.00194084, 0.00220079, 0.00239189, 0.00265494, 0.0029346, 0.00312813, 0.00339516, 0.00361511, 0.00426976, 0.00458709, 0.00490925, 0.00528296, 0.00542605, 0.00573005, 0.00614275, 0.00624269, 0.00674843, 0.00700212, 0.00918236, 0.00966442, 0.00871402, 0.0096881, 0.0134647, 0.0133119, 0.0115631, 0.0136708, 0.0153457, 0.0159593, 0.0162853, 0.0148701, 0.0151237, 0.0152895, 0.0158396, 0.0165443, 0.0170638, 0.0181406, 0.0183147, 0.0191841, 0.0198131, 0.0334794, 0.0364083, 0.0368505, 0.0377812, 0.0389521, 0.0401239, 0.0415033, 0.0427135, 0.044136, 0.045401, 0.0472, 0.048544, 0.0503148, 0.0511445, 0.0523349, 0.0540359, 0.0561007, 0.0570783, 0.0580156, 0.0605393, 0.0613031, 0.062524, 0.064625, 0.0656317, 0.0678385, 0.06884, 0.0704032, 0.0727353, 0.0751002, 0.0756277, 0.0771964, 0.0799363, 0.0797335, 0.0846311, 0.0884245, 0.0873577, 0.0942746, 0.0903949, 0.0934712, 0.0958555, 0.0980399, 0.098586, 0.100036 };


	plt.initialize(1);
	plt.settitle("ADD OPERATION PERFORMANCE");
	plt.setxlabel("DIMENTION");
	plt.setylabel("TIME");
	plt.setgridsize(1);
	plt.plot(xy,tNoSIM,"NO SIMD");
	plt.plot(xy,tSIM,"SIMD");

	vector<double> luNoSIM = {4e-05,0.000383,0.003419,0.071634,1443.89};
	vector<double> dimens = {12,31,82,237,6583};
	vector<double> luSIM = {4.6e-05,0.000194,0.001536,0.03095,360.087};

	plt2.initialize(2);
	plt2.settitle("LU DESCOMPOSITION PERFORMANCE");
	plt2.setxlabel("DIMENTION");
	plt2.setylabel("TIME");
	plt2.setgridsize(1);
	plt2.plot(dimens,luNoSIM,"NO SIMD");
	plt2.plot(dimens,luSIM,"SIMD");

	plt.showallplots();


	return 0;
}
#else
int main() {
	cout << "Result of Performance" << endl;
	plotpy::Plot2d<double> plt;
	plotpy::Plot2d<double> plt2;

	vector<double> tNoSIM = {1.66e-06, 2.83332e-05, 0.000104958, 0.000154174, 0.000191854, 0.000323495, 0.00043285, 0.000611395, 0.000817846, 0.00118423, 0.00128431, 0.00146131, 0.00178931, 0.00209028, 0.00245418, 0.00281354, 0.00319648, 0.00362348, 0.00408922, 0.00451537, 0.00521092, 0.0057274, 0.00624367, 0.00683413, 0.00749101, 0.0081233, 0.00869022, 0.00935261, 0.0100258, 0.0107161, 0.0114914, 0.0123969, 0.0131297, 0.014, 0.0147877, 0.0156738, 0.0165768, 0.01757, 0.0185849, 0.0193966, 0.0206649, 0.0217005, 0.0225994, 0.0236411, 0.0250575, 0.0260126, 0.02709, 0.0281615, 0.0294442, 0.0309171, 0.0319519, 0.0333698, 0.0348177, 0.0364483, 0.0369066, 0.0381719, 0.0396886, 0.0414953, 0.0566882, 0.0598424, 0.0616634, 0.0636522, 0.066266, 0.067973, 0.0699023, 0.072267, 0.0747329, 0.0770089, 0.0787436, 0.0822877, 0.0920184, 0.091618, 0.0921474, 0.0982582, 0.105336, 0.102058, 0.103416, 0.105369, 0.108041, 0.110819, 0.113449, 0.117237, 0.121785, 0.122778, 0.125808, 0.129114, 0.132639, 0.135613, 0.137665, 0.141616, 0.144567, 0.147206, 0.150105, 0.152888, 0.156844, 0.159671, 0.16858, 0.168223, 0.17101, 0.176058, 0.178003 };

	vector<double> xy = {3, 53, 103, 153, 203, 253, 303, 353, 403, 453, 503, 553, 603, 653, 703, 753, 803, 853, 903, 953, 1003, 1053, 1103, 1153, 1203, 1253, 1303, 1353, 1403, 1453, 1503, 1553, 1603, 1653, 1703, 1753, 1803, 1853, 1903, 1953, 2003, 2053, 2103, 2153, 2203, 2253, 2303, 2353, 2403, 2453, 2503, 2553, 2603, 2653, 2703, 2753, 2803, 2853, 2903, 2953, 3003, 3053, 3103, 3153, 3203, 3253, 3303, 3353, 3403, 3453, 3503, 3553, 3603, 3653, 3703, 3753, 3803, 3853, 3903, 3953, 4003, 4053, 4103, 4153, 4203, 4253, 4303, 4353, 4403, 4453, 4503, 4553, 4603, 4653, 4703, 4753, 4803, 4853, 4903, 4953, 5003 };

	vector<double> tSIM = {1.74e-06, 1.30748e-05, 4.07519e-05, 6.58438e-05, 9.51461e-05, 0.000122872, 0.000196962, 0.000259165, 0.000349906, 0.000409897, 0.00054333, 0.000624611, 0.000761987, 0.000920133, 0.00107344, 0.00122921, 0.00138597, 0.00155163, 0.00173212, 0.00194084, 0.00220079, 0.00239189, 0.00265494, 0.0029346, 0.00312813, 0.00339516, 0.00361511, 0.00426976, 0.00458709, 0.00490925, 0.00528296, 0.00542605, 0.00573005, 0.00614275, 0.00624269, 0.00674843, 0.00700212, 0.00918236, 0.00966442, 0.00871402, 0.0096881, 0.0134647, 0.0133119, 0.0115631, 0.0136708, 0.0153457, 0.0159593, 0.0162853, 0.0148701, 0.0151237, 0.0152895, 0.0158396, 0.0165443, 0.0170638, 0.0181406, 0.0183147, 0.0191841, 0.0198131, 0.0334794, 0.0364083, 0.0368505, 0.0377812, 0.0389521, 0.0401239, 0.0415033, 0.0427135, 0.044136, 0.045401, 0.0472, 0.048544, 0.0503148, 0.0511445, 0.0523349, 0.0540359, 0.0561007, 0.0570783, 0.0580156, 0.0605393, 0.0613031, 0.062524, 0.064625, 0.0656317, 0.0678385, 0.06884, 0.0704032, 0.0727353, 0.0751002, 0.0756277, 0.0771964, 0.0799363, 0.0797335, 0.0846311, 0.0884245, 0.0873577, 0.0942746, 0.0903949, 0.0934712, 0.0958555, 0.0980399, 0.098586, 0.100036 };


	plt.initialize(1);
	plt.settitle("ADD OPERATION PERFORMANCE");
	plt.setxlabel("DIMENTION");
	plt.setylabel("TIME");
	plt.setgridsize(1);
	plt.plot(xy,tNoSIM,"NO SIMD");
	plt.plot(xy,tSIM,"SIMD");

	vector<double> luNoSIM = {4e-05,0.000383,0.003419,0.071634,1443.89};
	vector<double> dimens = {12,31,82,237,6583};
	vector<double> luSIM = {4.6e-05,0.000194,0.001536,0.03095,360.087};

	plt2.initialize(2);
	plt2.settitle("LU DESCOMPOSITION PERFORMANCE");
	plt2.setxlabel("DIMENTION");
	plt2.setylabel("TIME");
	plt2.setgridsize(1);
	plt2.plot(dimens,luNoSIM,"NO SIMD");
	plt2.plot(dimens,luSIM,"SIMD");

	plt.showallplots();


	return 0;
}
#endif